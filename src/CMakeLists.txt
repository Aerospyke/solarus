include_directories (${ZSDX_SOURCE_DIR}/include)

add_executable (zsdx
	       ZSDX.cpp
	       FileTools.cpp
	       Random.cpp
	       KeysEffect.cpp
	       Game.cpp
	       GameResource.cpp
	       Savegame.cpp
	       Equipment.cpp
	       TextDisplayed.cpp
	       TitleScreen.cpp
	       SelectionMenu.cpp
	       HUD.cpp
	       HudElement.cpp
	       CounterView.cpp
	       HeartsView.cpp
	       RupeesView.cpp
	       MagicBar.cpp
	       ActionIcon.cpp
	       SwordIcon.cpp
	       PauseIcon.cpp
	       Map.cpp
	       MapLoader.cpp
	       MapEntrance.cpp
	       MapEntity.cpp
	       Movement.cpp
	       MovementWithCollision.cpp
	       MovementWithSmoothCollision.cpp
	       Movement8ByPlayer.cpp
	       EntityDetector.cpp
	       MapExit.cpp
	       Sprite.cpp
	       SpriteAnimations.cpp
	       SpriteAnimation.cpp
	       SpriteAnimationDirection.cpp
	       PickableItem.cpp
	       SimpleTile.cpp
	       AnimatedTile.cpp
	       TileOnMap.cpp
	       Tile.cpp
	       Color.cpp
	       Link.cpp
	       Music.cpp
	       Sound.cpp
	       Tileset.cpp
	       TransitionEffect.cpp
	       TransitionImmediate.cpp
	       TransitionFade.cpp
)

# Under Windows, at runtime, the data directory is relative to the current directory
if (NOT WIN32)
   SET_TARGET_PROPERTIES(zsdx PROPERTIES
			      COMPILE_FLAGS -DDATADIR_="${CMAKE_INSTALL_PREFIX}/share/zsdx")

   SET_TARGET_PROPERTIES(zsdx PROPERTIES
			      COMPILE_FLAGS "-g -ansi -Wall -Werror")
endif (NOT WIN32)

target_link_libraries (zsdx
		      SDL
		      SDLmain
		      SDL_image
		      SDL_ttf
		      fmodex
)

INSTALL(TARGETS	zsdx
	RUNTIME DESTINATION bin
)
